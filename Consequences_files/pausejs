(()=>{(function(o,g){let c="11805532",v="{beacon}",C=String.raw`#rac-container{padding:0;font-size:12px;line-height:13px;background:none;visibility:visible;opacity:1;overflow:hidden;border:0;color:inherit;text-align:left;font-family:Inter,sans-serif;-webkit-text-decoration:none;text-decoration:none;max-width:300px;min-width:200px;display:block;margin:auto}#rac-pause-ad-image{margin:0 0 12px;padding:0;-webkit-text-decoration:none;text-decoration:none;font-size:12px;line-height:13px;background:none;visibility:visible;opacity:1;overflow:hidden;border:0;color:inherit;text-align:left;display:block;border-radius:12px;width:300px;height:250px;border:1px solid #707070;box-sizing:content-box}#rac-description{margin:0 0 12px;padding:0;-webkit-text-decoration:none;text-decoration:none;font-size:12px;line-height:13px;background:none;visibility:visible;opacity:1;border:0;color:inherit;text-align:left;display:block;color:#fff;font-size:14px;font-style:normal;font-weight:600;line-height:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#rac-title{margin:0 0 4px;padding:0;-webkit-text-decoration:none;text-decoration:none;font-size:12px;background:none;visibility:visible;opacity:1;border:0;color:inherit;text-align:left;display:block;color:#fff;font-size:10px;font-style:normal;font-weight:700;line-height:13px;letter-spacing:.2px;text-transform:uppercase;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#rac-learn-more{margin:0;-webkit-text-decoration:none;text-decoration:none;line-height:13px;background:none;visibility:visible;opacity:1;overflow:hidden;border:0;color:inherit;text-align:left;display:block;padding:10px 20px;border-radius:100px;background:#707070;color:#fff;text-align:center;font-size:12px;font-style:normal;font-weight:600;line-height:14px;transition:.2s all;border:1px solid transparent;box-sizing:content-box}#rac-learn-more:hover{border:1px solid #9a9a9a}@media screen and (max-width: 1140px){#rac-container{display:grid;grid-template-columns:1fr 1fr;column-gap:12px;min-width:250px}#rac-container.rac-not-native{display:grid;grid-template-columns:1fr}#rac-container.rac-not-native #rac-pause-ad-image{width:145px}#rac-container.rac-not-native #rac-learn-more{width:145px;margin:5px auto 0;padding:6px 0;grid-column:unset}#rac-pause-ad-image{width:100%;height:auto;margin:0 auto;grid-row:span 2}#rac-title{grid-column:2;grid-row:1;font-weight:800}#rac-description{grid-column:2;grid-row:1;margin-top:20px;white-space:normal;overflow:visible;text-overflow:ellipsis;margin-bottom:0;font-weight:400;font-size:10px}#rac-learn-more{margin-top:12px;grid-column:span 2;grid-row:3;font-size:10px;padding:6px 20px}}@media screen and (max-width: 375px){#rac-container{min-width:245px}}@media screen and (max-width: 320px){#rac-container{min-width:200px}#rac-container.rac-not-native #rac-learn-more{display:none}}@media screen and (max-width: 300px){#rac-container #rac-learn-more{display:none}}
`.replace(/#rac-/g,`#rac-${c}-`).replace(/\.rac-/g,`.rac-${c}-`),w={url:new URLSearchParams(o.location.search),get(d){return this.url.get(d)},equals(d,r){return this.get(d)===r}},i={instance:Math.floor(Math.random()*9999999),debug:w.equals("rac_debug","true"),demo_ad:w.get("rac_demo_ad"),zone:"469",site:"2",host:"https://a-delivery.rmbl.ws",width:"300",height:"250",pub:"7",frequency:{delay:2e3}},s={undef(d){return typeof d>"u"},safe(d){try{return d()}catch(r){return i.debug&&console.warn(r),!1}},log(){i.debug&&console.log(`[${new Date().toLocaleTimeString()}][RAC] `,...arguments)},objToHttpArr(d){if(typeof d!="object")return[];var r=[];for(var e in d){var t=d[e];Array.isArray(t)&&(t=t.join(",")),r.push(e+"="+encodeURIComponent(t))}return r},debounce(d,r){let e;return function(...t){let n=this;clearTimeout(e),e=setTimeout(function(){d.apply(n,t)},r)}}};class E{constructor(){this.lastCallTimeMS=0,this.bindAll(["fetch","newElement","dismissed","errored","src","isValidJsonAd","breakStringBeforeN","screenResize"]),this.head=g?.head,this.head&&(g.getElementById(c)||(this.css=this.newElement("style",{id:c,innerHTML:C}),this.head.appendChild(this.css))),o.addEventListener("resize",s.debounce(this.screenResize,100))}bindAll(r){r.forEach(e=>{this[e]=this[e].bind(this)})}breakStringBeforeN(r,e){if(e>=r.length)return r;let t=r.lastIndexOf(" ",e);return t===-1?r.substring(0,e):r.substring(0,t)}fetch(r={}){let e=this;return new Promise((t,n)=>{let f=Date.now();if(f-e.lastCallTimeMS>i.frequency.delay)e.lastCallTimeMS=f;else{n({code:0,error:`fetch called consecutively within ${i.frequency.delay}ms`});return}i.demo_ad!==null&&i.demo_ad.length>0&&(r.demo_ad=i.demo_ad),fetch(e.src(r)).then(l=>l.json()).then(l=>{if(l?.ads?.length===0)throw new Error("ad_no_more_ads");if(!e.isValidJsonAd(l))throw new Error("ad_invalid_response");let a=l.ads[0],$=a.asset,u=a.click,b=a.impression,m=new URLSearchParams(new URL(b).search).get("tid");if(m.length===0)throw new Error("ad_invalid_tid");let y=280;a?.native&&(y+=a.native?.brand?18:0,y+=a.native?.title?18:0),s.log("received ad with asset:",$,", click:",u,", title:",a?.native?.title,", brand:",a?.native?.brand,", impression:",b);let S=e.newElement("div"),h=e.newElement("div",{id:`rac-${c}-container`,width:"100%",height:y.toString()+"px",textContent:v});h.dataset.tid=m;let _=e.newElement("a",{href:u,target:"_blank"});_.style.margin="0 auto",_.appendChild(e.newElement("img",{id:`rac-${c}-pause-ad-image`,src:$,alt:""})),h.appendChild(_);let p=!1;if(a.native&&(a.native.brand&&a.native.brand!==""&&(p=!0,h.appendChild(e.newElement("a",{id:`rac-${c}-title`,textContent:a.native.brand,title:a.native.brand,href:u,target:"_blank"}))),a.native.title&&a.native.title!=="")){p=!0;let k=e.nativeDesc(e.pageWidth(),a.native.title);h.appendChild(e.newElement("a",{id:`rac-${c}-description`,textContent:k,title:a.native.title,href:u,target:"_blank"}))}p||h.classList.add(`rac-${c}-not-native`),h.appendChild(e.newElement("a",{id:`rac-${c}-learn-more`,href:u,target:"_blank",textContent:"Learn More"})),S.appendChild(h),t({html:S.innerHTML.replace(v,`<img src='${b}' style='position:absolute;visibility:hidden;' alt=''>`),dismissed:function(){return e.dismissed(m)},errored:function(k){return e.errored(m,k)}})}).catch(l=>{s.log(l),n({code:111,error:l.toString()})})})}pageWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}nativeDesc(r,e){let t;return r>375?t=146:r>320?t=90:t=50,e.length>t?this.breakStringBeforeN(e,t)+"...":e}dismissed(r){let e=`${i.host}/v1/events/pause_ad_dismiss/${r}?zone=${i.zone}`;return fetch(e).catch(t=>(s.log(t),{code:999,error:t.toString()}))}errored(r,e){let t=`${i.host}/v1/events/pause_ad_error/${r}?zone=${i.zone}`;return!s.undef(e)&&Number.isInteger(e)&&(t+=`&code=${e}`),fetch(t).catch(n=>(s.log(n),{code:888,error:n.toString()}))}screenResize(){let r=this;s.safe(function(){let e=g.getElementById(`rac-${c}-clickable-container`);if(s.undef(e)||e===null)return;let t=e.querySelector(`#rac-${c}-description`);!s.undef(t)&&t!==null&&!s.undef(t.title)&&t.title.length>0&&(t.textContent=r.nativeDesc(r.pageWidth(),t.title))})}isValidJsonAd(r,e=0){if(!r)return!1;let t=r.ads[e]?.asset,n=r.ads[e]?.click,f=r.ads[e]?.impression;return r?.ads?.length>e&&t&&n&&f}setParams(r){let e={};if(typeof r!="object")return e;for(let t in r){let n=t.match(/s\d?\d\b/g);if(n!==null&&n.length>0){e[t]=r[t];continue}switch(t){case"debug":e.debug=r[t]==="true"||r[t]===!0,e.debug===!0&&(e.fc=!1);break;case"cpid":case"content_publisher_id":e.cpid=r[t];break;case"cuid":case"content_user_id":e.cuid=r[t];break;case"cvid":case"content_video_id":e.cvid=r[t];break;case"ccid":case"content_channel_id":e.ccid=r[t];break;case"keywords":e.keywords=Array.isArray(r[t])?r[t].join(","):r[t];break;case"categories":e.categories=Array.isArray(r[t])?r[t].join(","):r[t];break;case"cuab":e.cuab=r[t];break;case"cug":e.cug=r[t];break;case"cuuid":e.cuuid=r[t];break;case"demo_ad":e.demo_ad=r[t];break}}return e}src(r){let e=this,t=s.safe(function(){return e.setParams(r)}),n=[];return Object.keys(t).length>0&&n.push(...s.objToHttpArr(t)),`${i.host}/v1/zones/${i.zone}/json?count=1&type=pause&`+n.join("&")}newElement(r,e){let t=document.createElement(r);return t.classList.add(this.globalClassName()),e?.class&&t.classList.add(e.class),e&&Object.keys(e).map(n=>{t[n]=e[n]}),t}globalClassName(){return`rac-iid-${i.instance}`}}o.rads=s.undef(o.rads)?{}:o.rads,o.rads.sdks=s.undef(o.rads.sdks)?{}:o.rads.sdks;let A=new E;Object.defineProperty(o.rads.sdks,"pause",{value:{fetch:A.fetch},writable:!1,enumerable:!1,configurable:!1})})(window,document);})();
